<html>
  <head>
    <meta charset="utf-8" />
    <title>Snake</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/p5@1/lib/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1/lib/addons/p5.sound.min.js"></script>
    <script src="https://unpkg.com/@free-side/audioworklet-polyfill/dist/audioworklet-polyfill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/planck@latest/dist/planck.min.js"></script>
    <script src="https://p5play.org/v3/p5play.js"></script>
  </head>
  <body>
    <script src="index.js"></script>
    <script>
      let snake;
      let rez = 10;
      let food;
      let w;
      let h;

      window.setup = () => {
        createCanvas(400, 400);
        w = floor(width / rez);
        h = floor (height / rez);
        frameRate(10);
        snake = new Snake();
        foodLocation();
      }

      function foodLocation() {
        let x = floor(random(w));
        let y = floor(random(h));
        food = createVector(x, y);
      }

      function keyPressed() {
        if (keyCode === LEFT_ARROW) {
          snake.setDir(-1, 0);
        } else if (keyCode === RIGHT_ARROW) {
          snake.setDir(1, 0);
        } else if (keyCode === DOWN_ARROW) {
          snake.setDir(0, 1);
        } else if (keyCode === UP_ARROW) {
          snake.setDir(0, -1);
        }
      }

      window.draw = () => {
        scale(rez);
        textSize(2);
        text("Score: " + snake.score, 0, 2);
        background(220);
        if (snake.eat(food)) {
          foodLocation();
        }
        snake.update();
        snake.show();

        if (snake.endGame()) {
          print("END GAME");
          background(255, 0, 0);
          noLoop();
          var txt;
          if (confirm("Do you wish to restart?")) {
            setup();
        } else {
            txt = "See you next time!";
        }
          document.getElementById("demo").innerHTML = "txt";
        }

        noStroke();
        fill(255, 0, 0);
        rect(food.x, food.y, 1, 1);
      }
    </script>
  </body>
</html>